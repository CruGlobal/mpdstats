<?xml version="1.0" encoding="UTF-8"?>
<!-- 
<!DOCTYPE datasources
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN" "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
 -->
<!-- dtd is not quite accurate: "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd" -->

<datasources>

  <!-- this datasource is used only by Quartz, which requires a non-XA datasource.  (even if we had used JobStoreCMT) -->
  <no-tx-datasource>  
    <jndi-name>jdbc/noTxETimesheetDatasource</jndi-name>  
    <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>  

    <connection-url>
      jdbc:oracle:thin:@
        (DESCRIPTION = 
           (ADDRESS_LIST =
              (ADDRESS = (PROTOCOL = TCP)(HOST = harta9210v.ccci.org)(PORT = 1521)))
           (CONNECT_DATA = 
              (SERVER = DEDICATED)
              (SERVICE_NAME = hcm9du.ccci.org)
            )
         )
    </connection-url>  
    <user-name>etimesheet</user-name>  
    <password>etimesheet</password>  
   
    <min-pool-size>1</min-pool-size>
    <max-pool-size>5</max-pool-size>  
    <query-timeout>60</query-timeout>
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>  
          
  </no-tx-datasource>


  <xa-datasource>
    <jndi-name>jdbc/eTimesheetDatasource</jndi-name>
    <track-connection-by-tx/>
    <isSameRM-override-value>false</isSameRM-override-value>
    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    
    <xa-datasource-property name="URL">
      jdbc:oracle:thin:@
        (DESCRIPTION = 
           (ADDRESS_LIST =
              (ADDRESS = (PROTOCOL = TCP)(HOST = harta9210v.ccci.org)(PORT = 1521)))
           (CONNECT_DATA = 
              (SERVER = DEDICATED)
              (SERVICE_NAME = hcm9du.ccci.org)
            )
         )
    </xa-datasource-property>
    <xa-datasource-property name="User">etimesheet</xa-datasource-property>
    <xa-datasource-property name="Password">etimesheet</xa-datasource-property>
    
    <!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool -->
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <!-- Checks the Oracle error codes and messages for fatal errors -->
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
    <!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa -->
    <no-tx-separate-pools/>

    <query-timeout>20</query-timeout>
      
  </xa-datasource>
  
  <xa-datasource>
    <jndi-name>jdbc/peoplesoftDatasource</jndi-name>
    <track-connection-by-tx/>
    <isSameRM-override-value>false</isSameRM-override-value>
    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>

    <xa-datasource-property name="URL">
      jdbc:oracle:thin:@
        (DESCRIPTION = 
           (ADDRESS_LIST =
              (ADDRESS = (PROTOCOL = TCP)(HOST = harta9210v.ccci.org)(PORT = 1521)))
           (CONNECT_DATA = 
              (SERVER = DEDICATED)
              (SERVICE_NAME = hcm9du.ccci.org)
            )
         )
    </xa-datasource-property>
    <xa-datasource-property name="User">javasystem</xa-datasource-property>
    <xa-datasource-property name="Password">ght5ecx8</xa-datasource-property>

    <!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool -->
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <!-- Checks the Oracle error codes and messages for fatal errors -->
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
    <!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa -->
    <no-tx-separate-pools/>

    <query-timeout>20</query-timeout>
    
  </xa-datasource>
  
</datasources>