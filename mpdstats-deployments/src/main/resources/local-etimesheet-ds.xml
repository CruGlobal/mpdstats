<?xml version="1.0" encoding="UTF-8"?>
<!-- 
<!DOCTYPE datasources
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN" "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
 -->
<!-- dtd is not quite accurate: "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd" -->

    <!-- for local database testing -->
<datasources>

  <!-- this datasource is used only by Quartz, which requires a non-XA datasource.  (even if we had used JobStoreCMT) -->
  <no-tx-datasource>  
    <jndi-name>jdbc/noTxETimesheetDatasource</jndi-name>  
    <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>  

    <connection-url>jdbc:oracle:thin:@localhost:1521:XE</connection-url>  
    <user-name>eTimesheet</user-name>  
    <password>eTimesheet</password>  

    <min-pool-size>1</min-pool-size>
    <max-pool-size>5</max-pool-size>  
    <query-timeout>60</query-timeout>
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>  
          
  </no-tx-datasource>


  <xa-datasource>
    <jndi-name>jdbc/eTimesheetDatasource</jndi-name>
    <track-connection-by-tx/>
    <isSameRM-override-value>false</isSameRM-override-value>
    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    
    <xa-datasource-property name="URL">jdbc:oracle:thin:@localhost:1521:XE</xa-datasource-property>
    <xa-datasource-property name="User">eTimesheet</xa-datasource-property>
    <xa-datasource-property name="Password">eTimesheet</xa-datasource-property>
      
    <!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool -->
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <!-- Checks the Oracle error codes and messages for fatal errors -->
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
    <!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa -->
    <no-tx-separate-pools/>

    <query-timeout>20</query-timeout>
  </xa-datasource>
  
  <xa-datasource>
    <jndi-name>jdbc/peoplesoftDatasource</jndi-name>
    <track-connection-by-tx/>
    <isSameRM-override-value>false</isSameRM-override-value>
    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    
    <xa-datasource-property name="URL">jdbc:oracle:thin:@localhost:1521:XE</xa-datasource-property>
    <xa-datasource-property name="User">peoplesoft</xa-datasource-property>
    <xa-datasource-property name="Password">peoplesoft</xa-datasource-property>

    <!-- Uses the pingDatabase method to check a connection is still valid before handing it out from the pool -->
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker</valid-connection-checker-class-name>
    <!-- Checks the Oracle error codes and messages for fatal errors -->
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
    <!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa -->
    <no-tx-separate-pools/>

    <query-timeout>20</query-timeout>
    
  </xa-datasource>
  
</datasources>